---
import Layout from "@/layouts/Layout.astro";
import Nav from "@/components/Nav/Nav.astro";
import Hero from "@/components/Hero/Hero.astro";
import About from "@/components/About/About.astro";
import Projects from "@/components/Projects/Projects.astro";
import Form from "@/components/Form/Form.astro";
import Footer from "@/components/Footer/Footer.astro";
import "@/styles/global.css";
import "flag-icons/css/flag-icons.min.css";

export async function getStaticPaths() {
  return [
    { params: { lang: "en" } },
    { params: { lang: "es" } },
    { params: { lang: "ca" } },
  ];
}
---

<Layout title="Daniel Saavedra">
  <div id="window-container">
    <header id="header-container">
      <button id="nav-btn" class="nav-btn" style="display: none;"></button>
      <Nav />
    </header>

    <main id="main-container">
      <Hero />

      <About />

      <Projects />

      <Form />

      <Footer />
    </main>

    <footer>
      <!-- <img class="clouds" src="/cloudMask.jpg" alt=""> -->
      <svg
        class="clouds"
        viewBox="0 0 1200 800"
        xmlns="http://www.w3.org/2000/svg"
      >
        <mask id="m">
          <g class="cloud1">
            <rect fill="#fff" width="100%" height="801" y="799"></rect>
            <image
              xlink:href="https://assets.codepen.io/721952/cloud1Mask.jpg"
              width="1200"
              height="200"
            />
          </g>
        </mask>

        <image
          class="cloud1"
          xlink:href="https://assets.codepen.io/721952/cloud1.png"
          width="1200"
          height="800"
        />

        <image
          class="cloud2"
          xlink:href="https://assets.codepen.io/721952/cloud2.png"
          width="1200"
          height="800"
        />

        <image
          class="cloud3"
          xlink:href="https://assets.codepen.io/721952/cloud3.png"
          width="1200"
          height="800"
        />

        <rect
          id="arrow-btn"
          width="100"
          height="100"
          opacity="0"
          x="550"
          y="220"
          style="cursor:pointer"></rect>
      </svg>
    </footer>
  </div>
</Layout>

<script>
  import { animate, scroll } from "motion";
  import { scrollAnimations } from "@/utils/scrollAnimations";

  const scrollableContainer = document.getElementById("scrollable-container");
  const body = document.body;

  if (scrollableContainer) {
    scroll(animate(".cloud2", { y: [50, 0] }), {
      container: scrollableContainer,
    });
    scroll(animate(".cloud3", { y: [150, 0] }), {
      container: scrollableContainer,
    });

    scrollAnimations({
      animations: [
        {
          targetSelector: body,
          animationProps: {
            backgroundColor: "var(--primary-color-900)",
            color: "var(--neutral-color-100)",
          },
          duration: 0.3,
          reverseAnimationProps: {
            backgroundColor: "var(--primary-color-600)",
            color: "var(--neutral-color-900)",
          },
          reverseDuration: 0.3,
        },
        {
          targetSelector: "#window-container",
          animationProps: {
            borderInline: window.matchMedia("(min-width: 1440px)").matches
              ? "2px solid var(--glass-color-100)"
              : "none",
          },
          duration: 0.3,
          reverseAnimationProps: {
            borderInline: window.matchMedia("(min-width: 1440px)").matches
              ? "2px solid var(--glass-color-900)"
              : "none",
          },
          reverseDuration: 0.3,
        },
      ],
    });
  }
</script>
